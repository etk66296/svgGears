<!DOCTYPE html>
<html>
    <head>

        <title>svg gears</title>

        <script type="text/javascript" src="userForm.js"></script>
        <script type="text/javascript" src="involuteGear.js"></script>
        <script type="text/javascript" src="innerInvoluteGear.js"></script>
        <script type="text/javascript" src="svg.js"></script>

        <script type="text/javascript">
            window.onload = () => {

              let svgContainer = document.getElementById('svgMainContainer')
              let involuteGearA = new InvoluteGear(svgContainer)
              let involuteGearB = new InvoluteGear(svgContainer)
              let innerInvoluteGearA = new InnerInvoluteGear(svgContainer)
              involuteGearB.rotationDirection = -1
              involuteGearB.rotOffset = -1.65
              involuteGearA.calculate()
              involuteGearA.draw()
              involuteGearB.calculate()
              involuteGearB.draw()

              let angle = Math.PI * 0.5
              let gearDistance = (involuteGearA.z + involuteGearB.z) * involuteGearA.m
              let rotationCenterA = { x: 500.0, y: 400.0 }
              let rotationCenterB = { x: 500.0 + gearDistance, y: 400.0 }
              involuteGearA.translateRotate(angle, rotationCenterA)
              involuteGearB.translateRotate(angle, rotationCenterB)

              innerInvoluteGearA.calculate()
              innerInvoluteGearA.draw()
              innerInvoluteGearA.translateRotate(0, { x: 400, y: 400 })

              

              // let formContainer = document.getElementById('mainContainer')

              // let modulInput = new TextInput(formContainer, 'Modul m: ')
              // modulInput.setValue(3)
              // let zInput = new TextInput(formContainer, 'ZÃ¤hnezahl z: ')
              // zInput.setValue(36)
              // let alphaNullInput = new TextInput(formContainer, 'Normaleingriffswinkel a0: ')
              // alphaNullInput.setValue(20.0)
              // let dInput = new TextInput(formContainer, 'Durchmesser d: ')
              // let dkInput = new TextInput(formContainer, 'Durchmesser dk: ')
              // let dfInput = new TextInput(formContainer, 'Durchmesser df: ')

              // let calulate_d = () => {

              //   dInput.setValue(zInput.getValue() * modulInput.getValue())

              // }

              // let calulate_dk = () => {

              //   dkInput.setValue((zInput.getValue() - 2.5) * modulInput.getValue())

              // }
              
              // let calulate_df = () => {

              //   dfInput.setValue((zInput.getValue() + 2) * modulInput.getValue())

              // }

              // formContainer.addEventListener('input', () => {
                  
              //   calulate_d()
              //   calulate_dk()
              //   calulate_df()
                

              // })

              // calulate_d()
              // calulate_dk()
              // calulate_df()

              // let myGear = new Gear(svgContainer)
              // myGear.evolventeOpen(0.0, 10)
              // myGear.evolventeClose(0.0, 10)
              // myGear.toSvg(svgContainer, 1)

              // // myGear.translate(800.0, 800.0)
              // let rotationCenterA = { x: 500.0, y: 400.0 }
              // let rotationCenterB = { x: 500.0 + gearDistance, y: 400.0 }
              // let angle = Math.PI * 0.5

              // // let pos = { x: 0.0,  y: 0.0 }
              // let angle = 0
              // window.setInterval(() => {

                // myGear.translate(pos.x, pos.y)
                // pos.x += 1
              //   involuteGearA.translateRotate(angle, rotationCenterA)
              //   involuteGearB.translateRotate(angle, rotationCenterB)
              //   angle += 1

              // }, 100)


            }
        </script>
    
    </head>

    <body style="background-color: rgb(117, 180, 252);">

        <div id="mainContainer"></div>
        <div style="margin: 30px; background-color: rgb(117, 180, 252)">
          <svg id="svgMainContainer" width="1600" height="800">

            <line x1="0" y1="400" x2="1600" y2="400" style="stroke:rgb(255, 255, 255);stroke-width:1" />
            <line x1="500" y1="0" x2="500" y2="800" style="stroke:rgb(255, 255, 255);stroke-width:1" />

            <!-- <path d="M 80 80 A 45 45, 0, 0, 1, 125 125 L 125 80 Z" fill="green"/> -->

          </svg>

        </div>

    </body>

</html> 