<!DOCTYPE html>
<html>
    <head>

        <title>svg gears</title>

        <script type="text/javascript" src="userForm.js"></script>
        <script type="text/javascript" src="gear.js"></script>
        <script type="text/javascript" src="svg.js"></script>

        <script type="text/javascript">
            window.onload = () => {

              let formContainer = document.getElementById('mainContainer')
              let svgContainer = document.getElementById('svgMainContainer')

              let modulInput = new TextInput(formContainer, 'Modul m: ')
              modulInput.setValue(3)
              let zInput = new TextInput(formContainer, 'ZÃ¤hnezahl z: ')
              zInput.setValue(36)
              let alphaNullInput = new TextInput(formContainer, 'Normaleingriffswinkel a0: ')
              alphaNullInput.setValue(20.0)
              let dInput = new TextInput(formContainer, 'Durchmesser d: ')
              let dkInput = new TextInput(formContainer, 'Durchmesser dk: ')
              let dfInput = new TextInput(formContainer, 'Durchmesser df: ')

              let calulate_d = () => {

                dInput.setValue(zInput.getValue() * modulInput.getValue())

              }

              let calulate_dk = () => {

                dkInput.setValue((zInput.getValue() - 2.5) * modulInput.getValue())

              }
              
              let calulate_df = () => {

                dfInput.setValue((zInput.getValue() + 2) * modulInput.getValue())

              }

              formContainer.addEventListener('input', () => {
                  
                calulate_d()
                calulate_dk()
                calulate_df()
                

              })

              calulate_d()
              calulate_dk()
              calulate_df()

              let myGear = new Gear(svgContainer)
              myGear.evolventeOpen(0.0, 10)
              myGear.evolventeClose(0.0, 10)
              myGear.toSvg(svgContainer, 1)

              // myGear.translate(800.0, 800.0)
              let rotationCenter = { x: 400.0, y: 400.0 }
              let angle = Math.PI * 0.5

              // let pos = { x: 0.0,  y: 0.0 }
              // let angle = 0.010
              window.setInterval(() => {

                // myGear.translate(pos.x, pos.y)
                // pos.x += 1
                myGear.translateRotate(angle, rotationCenter)
                angle += 1

              }, 100)


            }
        </script>
    
    </head>

    <body style="background-color: #392d4e;">

        <div id="mainContainer"></div>
        <div style="margin: 30px; background-color: rgb(20, 20, 80)">
          <svg id="svgMainContainer" width="800" height="800">

            <line x1="0" y1="400" x2="800" y2="400" style="stroke:rgb(255,0,0);stroke-width:1" />
            <line x1="400" y1="0" x2="400" y2="800" style="stroke:rgb(255,0,0);stroke-width:1" />


            <path d="M 80 80 A 45 45, 0, 0, 1, 125 125 L 125 80 Z" fill="green"/>

          </svg>

        </div>

    </body>

</html> 